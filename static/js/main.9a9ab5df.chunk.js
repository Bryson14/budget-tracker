(this.webpackJsonpbudget_tracker=this.webpackJsonpbudget_tracker||[]).push([[0],{103:function(e,t){},104:function(e,t){},117:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(35),s=a.n(r),o=(a(41),a(5)),i=a.n(o),l=a(14),d=a(36),u=a(2),j=(a(43),a(0)),b=function(e){var t=e.id,a=e.date,n=e.amount,c=e.category,r=e.note,s=new Date(a),o=[String(s.getMonth()+1)+"/"+String(s.getUTCDate()),n.toFixed(2),c,r];return Object(j.jsx)("tr",{id:t,children:o.map((function(e,t){return Object(j.jsx)("td",{children:e},t)}))})},h=function(e){var t=e.expenses,a=e.tableVisible,n={visibility:null==a||a?"visible":"hidden",overflow:"scroll"};return Object(j.jsxs)("table",{style:n,className:"table table-striped table-dark table-hover align-left",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"col",children:"Date"}),Object(j.jsx)("th",{scope:"col",children:"Amount"}),Object(j.jsx)("th",{scope:"col",children:"Category"}),Object(j.jsx)("th",{scope:"col",children:"Note"})]})}),Object(j.jsx)("tbody",{children:t.map((function(e,t){return Object(j.jsx)(b,{id:t,date:e.date,amount:e.amount,category:e.category,note:e.note},t)}))})]})},m=function(e){var t=e.category,a=e.budget_amount,n=e.amount_remaining,c=e.category_transactions;a=null!=a?a:0;var r=(n=null!=n?n:a)>0?n:0,s=a-n,o=e.percentage_month_completed*a,i="card card-block h-100",l="  |  ".concat(Math.round(100*s/a),"% Usage");0===a?(i+="text-white bg-secondary",l="Error Card"):s<0?(i+=" text-white bg-info",l=" | Reason: Refund?"):i+=s/a>1?" text-white budget-past-100-percent":s>=o?" text-white budget-between-50-100":" text-white budget-below-50";return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"col-8 col-md-4 col-no-padding",children:Object(j.jsxs)("div",{className:i,onClick:function(){var e="Transaction".concat(c.length>1?"s":""," for ").concat(t);e+="\n";for(var a=0;a<32;a++)e+="_";e+="\n\n",c.forEach((function(t){var a=new Date(t.date),n=String(a.getMonth()+1)+"/"+String(a.getUTCDate());e+="".concat(n," - $").concat(t.amount," - ").concat(t.note,"\n")})),0===c.length&&(e="No transaction for ".concat(t," this month.")),alert(e)},children:[Object(j.jsx)("h5",{className:"card-title pt-3",children:t}),Object(j.jsxs)("div",{className:"card-body text-left",children:[Object(j.jsxs)("p",{className:"card-subtitle mb-2",children:["Remaining: $",r.toFixed(2)]}),Object(j.jsxs)("h6",{className:"card-text",children:["Budget: $",a]}),Object(j.jsxs)("h6",{className:"card-text",children:["Today's Budget: $",(o-s).toFixed(2)]}),Object(j.jsxs)("h6",{className:"card-text",children:["Spent: ",s.toFixed(2)," ",l?"".concat(l):""]})]})]})})})},O=function(e){var t=e.addExpense,a=e.categories,c=e.category_amount_remaining,r=(new Date).toISOString();r=r.slice(0,r.indexOf("T"));var s=Object(n.useState)(r),o=Object(u.a)(s,2),i=o[0],l=o[1],d=Object(n.useState)(""),b=Object(u.a)(d,2),h=b[0],m=b[1],O=Object(n.useState)(""),p=Object(u.a)(O,2),f=p[0],g=p[1],x=Object(n.useState)(""),v=Object(u.a)(x,2),y=v[0],w=v[1],N="col-sm-4 col-form-label text-white",S="text-danger col-sm-4 col-form-label text-white",_="form-control",D="form-control is-invalid",k=Object(n.useState)(N),C=Object(u.a)(k,2),E=C[0],F=C[1],T=Object(n.useState)(_),P=Object(u.a)(T,2),B=P[0],$=P[1],M=Object(n.useState)(N),I=Object(u.a)(M,2),A=I[0],V=I[1],R=Object(n.useState)(_),U=Object(u.a)(R,2),G=U[0],H=U[1],J=Object(n.useState)(N),L=Object(u.a)(J,2),K=L[0],Y=L[1],q=Object(n.useState)(_),z=Object(u.a)(q,2),Q=z[0],W=z[1],X=Object(n.useState)(N),Z=Object(u.a)(X,2),ee=Z[0],te=Z[1],ae=Object(n.useState)(_),ne=Object(u.a)(ae,2),ce=ne[0],re=ne[1],se=a.length>0&&a.map((function(e,t){var a="";return a=null!=c[e.name]&&c[e.name]>0?(a="$"+String(Math.round(c[e.name]))).padEnd(5)+"- ":"$0".padEnd(5)+"- ",Object(j.jsxs)("option",{value:e.name,children:[a,e.name]},t)}),undefined),oe=function(e){return function(t){switch(e){case"amount":w(t.target.value);break;case"category":g(t.target.value);break;case"note":m(t.target.value);break;case"date":var a=(new Date).toISOString();if(a=a.slice(0,a.indexOf("T")),t.target.value>a)return alert("Cannot have an expense in the future."),void l(a);l(t.target.value);break;default:alert("An unknown data: ".concat(e," was passed into the switch statement."))}}};return Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a=!0;if(""===y||0===y?(V(S),H(D),a=!1):(V(N),H(_)),""===h?(Y(S),W(D),a=!1):(Y(N),W(_)),""===f?(te(S),re(D),a=!1):(te(N),re(_)),""===i?(F(S),$(D),a=!1):(F(N),$(_)),a)try{var n=(new Date).toISOString();n=n.slice(0,n.indexOf("T"));var c=Number(y);t({date:i,amount:c,category:f,note:h}),l(n),m(""),g(""),w("")}catch(e){alert("Bad number conversion of amount to Number type")}},className:"px-4",children:[Object(j.jsxs)("div",{className:"form-group row",children:[Object(j.jsx)("label",{className:E,htmlFor:"dateinput",children:"Date"}),Object(j.jsx)("div",{className:"col-sm-8",children:Object(j.jsx)("input",{type:"date",className:B,value:i,onChange:oe("date")})})]}),Object(j.jsxs)("div",{className:"form-group row",children:[Object(j.jsx)("label",{className:A,htmlFor:"amountinput",children:"Amount"}),Object(j.jsx)("div",{className:"col-sm-8",children:Object(j.jsx)("input",{type:"number",step:"0.01",className:G,value:y,onChange:oe("amount"),id:"amountinput","aria-describedby":"amountHelp",placeholder:"Amount"})})]}),Object(j.jsxs)("div",{className:"form-group row",children:[Object(j.jsx)("label",{className:ee,htmlFor:"categorySelect",children:"Category"}),Object(j.jsx)("div",{className:"col-sm-8",children:Object(j.jsxs)("select",{className:ce,value:f,onChange:oe("category"),children:[Object(j.jsx)("option",{value:"",children:"Choose..."}),se]})})]}),Object(j.jsxs)("div",{className:"form-group row",children:[Object(j.jsx)("label",{className:K,htmlFor:"noteInput",children:"Note"}),Object(j.jsx)("div",{className:"col-sm-8",children:Object(j.jsx)("input",{type:"text",value:h,onChange:oe("note"),className:Q,id:"noteInput","aria-describedby":"noteHelp",placeholder:"Description"})})]}),Object(j.jsx)("div",{className:"form-group row justify-content-center",children:Object(j.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})},p=new(a(45))({apiKey:"keywSY73734Bt376s"}).base("app5VP16VBp5NgMg5");var f=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),s=Object(u.a)(r,2),o=s[0],b=s[1],f=Object(n.useState)(!1),g=Object(u.a)(f,2),x=g[0],v=g[1];function y(){return(y=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],p("Transactions").select({view:"Grid view"}).eachPage((function(e,a){e.forEach((function(e){t.push(e.fields)})),a()}),(function(e){e?console.error(e):c(t)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],p("Category_Budgets").select({view:"Grid view",fields:["name","amount"]}).eachPage((function(e,a){e.forEach((function(e){t.push(e.fields)})),a()}),(function(e){e?console.error(e):b(t)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p("Transactions").create([{fields:t}],(function(e,a){e?alert("Error posting Expense to Airtable ".concat(t,".")):a.forEach((function(e){}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){y.apply(this,arguments)}(),function(){w.apply(this,arguments)}()}),[]);var S={total_spent:0,total_budget:0};a.forEach((function(e){S.total_spent+=e.amount,S.hasOwnProperty(e.category)?S[e.category]+=e.amount:S[e.category]=e.amount}));var _={};o.forEach((function(e,t){_[e.name]=t,S.total_budget+=e.amount}));var D={};o.forEach((function(e,t){if(S.hasOwnProperty(e.name)){var a=e.amount-S[e.name];D[e.name]=null!=a?a:0}}));var k=new Date,C=new Date(k.getTime());C.setMonth(k.getMonth()+1),C.setDate(0);var E=C.getDate()>k.getDate()?C.getDate()-k.getDate():0,F=k.getDate()+E,T=k.getDate()/F,P=S.total_budget*T-S.total_spent;return Object(j.jsxs)("div",{className:"container-fluid p-2 text-center",children:[Object(j.jsxs)("div",{className:"form-div enter-expense-gradient",children:[Object(j.jsx)("h1",{className:"text-white pt-3",children:"Budget Tracker \ud83d\udcb8"}),Object(j.jsx)("small",{className:"text-light",children:Object(j.jsxs)("mark",{children:["Today's Budget: ",Object(j.jsxs)("b",{children:["$",P.toFixed(2)]})]})}),Object(j.jsx)("div",{className:"row d-flex justify-content-center mt-2",children:Object(j.jsx)("div",{className:"col-md-6",children:Object(j.jsx)(O,{addExpense:function(e){e.hasOwnProperty("date")&&e.hasOwnProperty("amount")&&e.hasOwnProperty("category")&&e.hasOwnProperty("note")?(c([e].concat(Object(d.a)(a))),function(e){N.apply(this,arguments)}(e)):alert("The expense object made did not have the following props: date, amount, category, note. \n Failed to set state")},categories:o,category_amount_remaining:D})})})]}),Object(j.jsx)("hr",{}),Object(j.jsxs)("div",{className:"container-fluid ",children:[Object(j.jsx)("h2",{children:"Categories"}),Object(j.jsx)("div",{className:"row flex-row flex-nowrap overflow-auto",children:o.map((function(e,t){return Object(j.jsx)(m,{category:e.name,budget_amount:e.amount,amount_remaining:D[e.name],category_transactions:a.filter((function(t){return t.category===e.name})),percentage_month_completed:T},t)}))})]}),Object(j.jsx)("hr",{}),Object(j.jsxs)("div",{className:"",children:[Object(j.jsxs)("div",{onClick:function(){v(!x)},style:{cursor:"pointer"},children:[Object(j.jsxs)("h2",{children:[" Expenses ",x?"\u02c4":"\u02c5"," "]}),Object(j.jsx)("small",{className:"mb-2",children:Object(j.jsxs)("mark",{children:["Spent $",S.total_spent.toFixed(2)," of $",S.total_budget]})})]}),Object(j.jsx)(h,{expenses:a,tableVisible:x})]})]})},g=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,118)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(f,{})}),document.getElementById("root")),g()},41:function(e,t,a){},43:function(e,t,a){}},[[117,1,2]]]);
//# sourceMappingURL=main.9a9ab5df.chunk.js.map